{% extends "base.html" %}

{% block title %}Configurações{% endblock %}

{% block content %}
<style>
    .config-section { background-color: #fff; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .config-section h3 { margin-top: 0; }
    .messages { padding: 15px; border-radius: 5px; margin-bottom: 20px; font-weight: bold; }
    .messages.success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
    .messages.error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    .messages.warning { background-color: #fff3cd; color: #856404; border: 1px solid #ffeeba; }
    button { padding: 10px 15px; background-color: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
    .checkbox-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; }
</style>

<h2>Página de Configuração</h2>

{% if messages %}
    {% for message in messages %}
        <div class="messages {{ message.tags }}">{{ message }}</div>
    {% endfor %}
{% endif %}

<div class="config-section">
    <h3>1. Importar Planilha de Cadastro</h3>
    <p>Apaga os produtos antigos e importa os novos. (Coluna "Código" obrigatória)</p>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form_cadastro.as_p }}
        <button type="submit" name="upload_cadastro">Importar Cadastro</button>
    </form>
</div>

<div class="config-section">
    <h3>2. Importar Planilha de Lotes/Estoque</h3>
    <p>Apaga os lotes antigos e importa os novos. (Colunas "Lote" e "Código" obrigatórias)</p>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form_lotes.as_p }}
        <button type="submit" name="upload_lotes">Importar Lotes</button>
    </form>
</div>

<div class="config-section">
    <h3>3. Configurar Campos Visíveis na Consulta</h3>
    <form method="post">
        {% csrf_token %}
        <h4>Campos do Produto para Exibir</h4>
        <div class="checkbox-grid">{{ form_config.campos_visiveis_produto }}</div>
        <br>
        <h4>Campos do Lote para Exibir</h4>
        <div class="checkbox-grid">{{ form_config.campos_visiveis_lote }}</div>
        <br>
        <button type="submit" name="salvar_configuracao">Salvar Configuração</button>
    </form>
</div>
{% endblock %}